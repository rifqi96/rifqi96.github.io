<!DOCTYPE html>
<html>

<head>
  <title>Margin Calculator</title>
  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
    integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">
  <!-- Import main.js -->
  <script src="main.js"></script>
  <!-- Import style.css -->
  <link rel="stylesheet" href="style.css">
  <!-- Tradingview js -->
  <script type="text/javascript" src="https://s3.tradingview.com/tv.js"></script>
</head>

<body>
  <div class="container">
    <h1 class="text-center">Margin Calculator</h1>
    <form>
      <div class="form-group">
        <label for="stop-loss-percent">Stop Loss Percentage:</label>
        <input type="number" class="form-control" id="stop-loss-percent" placeholder="Enter the stop loss percentage"
          onkeyup="calculate()">
      </div>
      <div class="form-group">
        <label for="stop-loss-dollar">Stop Loss in Dollar:</label>
        <input type="number" class="form-control" id="stop-loss-dollar" placeholder="Enter the stop loss in dollar"
          onkeyup="calculate()">
      </div>
      <div class="form-group">
        <label for="leverage">Leverage:</label>
        <input type="number" class="form-control" id="leverage" placeholder="Enter the leverage (e.g. 1x, 5x, 20x)"
          onkeyup="calculate()">
      </div>
      <div class="form-group">
        <!-- Reward to risk ratio slider (rr). Default is 3. -->
        <!-- https://www.w3schools.com/howto/howto_js_rangeslider.asp -->
        <label for="rr">Reward to Risk Ratio: <span id="rr-value" class="mt-4">4</span>:1</label>
        <input type="range" step="0.1" min="1" max="10" value="4" class="form-control-range" id="rr">
      </div>
      <div class="form-group">
        <!-- Searchable dropdown component -->
        <!-- https://www.w3schools.com/howto/howto_js_filter_dropdown.asp -->
        <label for="ticker">Ticker:</label>
        <input type="text" class="form-control" id="ticker" placeholder="Enter the ticker" onkeyup="filterFunction()" onkeydown="calculate()">
        <span class="fetching-text mt-4">Fetching data, please wait...</span>
        <!-- Progress bar -->
        <!-- https://www.w3schools.com/howto/howto_css_progressbar.asp -->
        <div class="progress">
          <div class="progress-bar progress-bar-striped progress-bar-animated mt-4" role="progressbar" aria-valuenow="75"
            aria-valuemin="0" aria-valuemax="100" style="width: 75%"></div>
        </div>
        <div id="tickerDropdown" class="dropdown-content">
          <!-- <a href="#">BTCUSDT</a> -->
        </div>
      </div>
      <div class="form-group">
        <button type="button" class="btn btn-success buy">Buy</button>
        <button type="button" class="btn btn-danger sell">Sell</button>
        <!-- Send order -->
        <button type="button" class="btn btn-primary send-order ml-2" disabled>Send order</button>
        <!-- Close trade -->
        <button type="button" class="btn btn-outline-danger close-trade ml-2" disabled>Close trade</button>
      </div>
      <div class="form-group">
        <!-- Collapsible component that shows a tradingview embed chart -->
        <!-- https://www.w3schools.com/howto/howto_js_collapsible.asp -->
        <button type="button" class="btn btn-primary collapse-toggle-btn" data-toggle="collapse" data-target="#chart">Show chart</button>
        <div class="collapse">
          <!-- TradingView Widget BEGIN -->
          <div id="chart" class="tradingview-widget-container">
            <div id="tradingview_5e9ab"></div>
          </div>
          <!-- TradingView Widget END -->
        </div>
      </div>
      <div class="form-group">
        <label for="trade-text">Use the following text to open a trade:</label>
        <textarea class="form-control" id="trade-text" rows="3" readonly></textarea>
        <!-- Add copy to clipboard button which is enabled only when text is not empty. Also add a tooltip saying the text is copied when it's clicked. -->
        <button type="button" class="btn btn-primary mt-4 copy-to-clipboard" onclick="copyToClipboard()" data-toggle="tooltip"
          data-placement="top" title="Copied!" disabled>Copy to Clipboard</button>
      </div>
    </form>
    <div id="error-message" class="text-danger" style="display: none;"></div>
    <div id="result" style="display: none;"></div>
  </div>
</body>

</html>